{% extends "base.html" %}

{% block body %}
<div class="search-bar">
    <input type="text" id="search" placeholder="Search by Name" size="64">
</div>
<div id="search_results" style="background-color: whitesmoke; position: absolute;"></div>
<div class="sort-by-theme">
    <label for="sort_by_theme">Sort by theme</label>
    <select name="sort_by_theme" id="sort_by_theme">
        {% for theme in all_themes %}
        <option value="{{theme}}">{{theme}}</option>
        {% endfor %}
    </select>
</div>
<div class="show-fig" id="fig-container">
</div>
<script>
    function load_data(theme = 'General') {
        $.ajax({
            url: "/browse_fig/by_theme/" + theme,
            method: "GET",
            success: function (data) {
                $('#fig-container').html(data.html)
            }
        })
    }
    function search_term(value) {
        if (value.length >= 2) {
            $.ajax({
                url: '/browse_fig/by_search?search=' + value,
                method: "GET",
                success: function (data) {
                    $('#search_results').html(data.html)
                }
            })
        }
    }
    $(document).ready(function () {
        load_data();
    })
    $("#sort_by_theme").change(function () {
        load_data($(this).val())
    });
    $('#search').on('input', function () {
        search_term($(this).val())
    })

</script>

{% endblock %}